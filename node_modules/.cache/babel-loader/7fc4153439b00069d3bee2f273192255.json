{"remainingRequest":"/Users/tb/mini-project/node_modules/babel-loader/lib/index.js!/Users/tb/mini-project/src/store/auth.js","dependencies":[{"path":"/Users/tb/mini-project/src/store/auth.js","mtime":1615892308083},{"path":"/Users/tb/mini-project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tb/mini-project/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy90Yi9taW5pLXByb2plY3Qvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiB7CiAgICB0b2tlbjogbnVsbCwKICAgIHVzZXI6IG51bGwKICB9LAogIGdldHRlcnM6IHsKICAgIGF1dGhlbnRpY2F0ZWQ6IGZ1bmN0aW9uIGF1dGhlbnRpY2F0ZWQoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnRva2VuICYmIHN0YXRlLnVzZXI7CiAgICB9LAogICAgdXNlcjogZnVuY3Rpb24gdXNlcihzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUudXNlcjsKICAgIH0KICB9LAogIG11dGF0aW9uczogewogICAgU0VUX1RPS0VOOiBmdW5jdGlvbiBTRVRfVE9LRU4oc3RhdGUsIHRva2VuKSB7CiAgICAgIHN0YXRlLnRva2VuID0gdG9rZW47CiAgICB9LAogICAgU0VUX1VTRVI6IGZ1bmN0aW9uIFNFVF9VU0VSKHN0YXRlLCB1c2VyKSB7CiAgICAgIHN0YXRlLnVzZXIgPSB1c2VyOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgc2lnbkluOiBmdW5jdGlvbiBzaWduSW4oX3JlZiwgY3JlZGVudGlhbHMpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgZGlzcGF0Y2gsIHJlc3BvbnNlLCB1c2VyOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGRpc3BhdGNoID0gX3JlZi5kaXNwYXRjaDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoJ2h0dHA6Ly8xMC4xMC4wLjM4OjgwODMvdjEvYXV0aCcsIGNyZWRlbnRpYWxzKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgdXNlciA9IHJlc3BvbnNlLmRhdGEuZGF0YS51c2VyOyAvLyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcicsIHVzZXIpCiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh1c2VyKQoKICAgICAgICAgICAgICAgIGRpc3BhdGNoKCd1c2VyJywgdXNlcik7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBkaXNwYXRjaCgnYXR0ZW1wdCcsIHJlc3BvbnNlLmRhdGEuZGF0YS50b2tlbikpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgdXNlcjogZnVuY3Rpb24gdXNlcihfcmVmMiwgX3VzZXIpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIGNvbW1pdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjIuY29tbWl0OwogICAgICAgICAgICAgICAgY29tbWl0KCdTRVRfVVNFUicsIF91c2VyKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgYXR0ZW1wdDogZnVuY3Rpb24gYXR0ZW1wdChfcmVmMywgdG9rZW4pIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIGNvbW1pdCwgc3RhdGU7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYzLmNvbW1pdCwgc3RhdGUgPSBfcmVmMy5zdGF0ZTsKCiAgICAgICAgICAgICAgICBpZiAodG9rZW4pIHsKICAgICAgICAgICAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCB0b2tlbik7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHN0YXRlLnRva2VuKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzaWduT3V0OiBmdW5jdGlvbiBzaWduT3V0KF9yZWY0KSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQ7CiAgICAgIHJldHVybiBheGlvcy5wb3N0KCdhdXRoL3NpZ25JbicpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgbnVsbCk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/tb/mini-project/src/store/auth.js"],"names":["axios","namespaced","state","token","user","getters","authenticated","mutations","SET_TOKEN","SET_USER","actions","signIn","credentials","dispatch","post","response","data","commit","attempt","signOut","then"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,eAAe;AACbC,EAAAA,UAAU,EAAE,IADC;AAEbC,EAAAA,KAAK,EAAE;AACLC,IAAAA,KAAK,EAAE,IADF;AAELC,IAAAA,IAAI,EAAE;AAFD,GAFM;AAMbC,EAAAA,OAAO,EAAE;AACPC,IAAAA,aADO,yBACOJ,KADP,EACc;AACnB,aAAOA,KAAK,CAACC,KAAN,IAAeD,KAAK,CAACE,IAA5B;AACD,KAHM;AAIPA,IAAAA,IAJO,gBAIFF,KAJE,EAIK;AACV,aAAOA,KAAK,CAACE,IAAb;AACD;AANM,GANI;AAcbG,EAAAA,SAAS,EAAE;AACTC,IAAAA,SADS,qBACCN,KADD,EACQC,KADR,EACe;AACtBD,MAAAA,KAAK,CAACC,KAAN,GAAcA,KAAd;AACD,KAHQ;AAITM,IAAAA,QAJS,oBAIAP,KAJA,EAIOE,IAJP,EAIa;AACpBF,MAAAA,KAAK,CAACE,IAAN,GAAaA,IAAb;AACD;AANQ,GAdE;AAsBbM,EAAAA,OAAO,EAAE;AACDC,IAAAA,MADC,wBACoBC,WADpB,EACiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAzBC,gBAAAA,QAAyB,QAAzBA,QAAyB;AAAA;AAAA,uBACjBb,KAAK,CAACc,IAAN,CACnB,gCADmB,EAEnBF,WAFmB,CADiB;;AAAA;AAClCG,gBAAAA,QADkC;AAMhCX,gBAAAA,IANgC,GAMzBW,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBZ,IANM,EAOtC;AACA;;AACAS,gBAAAA,QAAQ,CAAC,MAAD,EAAST,IAAT,CAAR;AATsC,iDAW/BS,QAAQ,CAAC,SAAD,EAAYE,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBb,KAA/B,CAXuB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYvC,KAbM;AAcDC,IAAAA,IAdC,uBAcgBA,KAdhB,EAcsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAhBa,gBAAAA,MAAgB,SAAhBA,MAAgB;AAC3BA,gBAAAA,MAAM,CAAC,UAAD,EAAab,KAAb,CAAN;;AAD2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAE5B,KAhBM;AAiBDc,IAAAA,OAjBC,0BAiB0Bf,KAjB1B,EAiBiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAxBc,gBAAAA,MAAwB,SAAxBA,MAAwB,EAAhBf,KAAgB,SAAhBA,KAAgB;;AACtC,oBAAIC,KAAJ,EAAW;AACTc,kBAAAA,MAAM,CAAC,WAAD,EAAcd,KAAd,CAAN;AACD;;AAHqC,oBAIjCD,KAAK,CAACC,KAJ2B;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOvC,KAxBM;AAyBPgB,IAAAA,OAzBO,0BAyBa;AAAA,UAAVF,MAAU,SAAVA,MAAU;AAClB,aAAOjB,KAAK,CAACc,IAAN,CAAW,aAAX,EAA0BM,IAA1B,CAA+B,YAAM;AAC1CH,QAAAA,MAAM,CAAC,WAAD,EAAc,IAAd,CAAN;AACD,OAFM,CAAP;AAGD;AA7BM;AAtBI,CAAf","sourcesContent":["import axios from 'axios'\nexport default {\n  namespaced: true,\n  state: {\n    token: null,\n    user: null,\n  },\n  getters: {\n    authenticated(state) {\n      return state.token && state.user\n    },\n    user(state) {\n      return state.user\n    },\n  },\n  mutations: {\n    SET_TOKEN(state, token) {\n      state.token = token\n    },\n    SET_USER(state, user) {\n      state.user = user\n    },\n  },\n  actions: {\n    async signIn({ dispatch }, credentials) {\n      let response = await axios.post(\n        'http://10.10.0.38:8083/v1/auth',\n        credentials\n      )\n\n      const user = response.data.data.user\n      // localStorage.setItem('user', user)\n      // console.log(user)\n      dispatch('user', user)\n\n      return dispatch('attempt', response.data.data.token)\n    },\n    async user({ commit }, user) {\n      commit('SET_USER', user)\n    },\n    async attempt({ commit, state }, token) {\n      if (token) {\n        commit('SET_TOKEN', token)\n      }\n      if (!state.token) {\n        return\n      }\n    },\n    signOut({ commit }) {\n      return axios.post('auth/signIn').then(() => {\n        commit('SET_TOKEN', null)\n      })\n    },\n  },\n}\n"]}]}